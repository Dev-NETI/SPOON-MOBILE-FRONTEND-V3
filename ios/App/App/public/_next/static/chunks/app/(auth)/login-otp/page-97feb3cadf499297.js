(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[325],{7184:function(e,t,r){Promise.resolve().then(r.bind(r,6353))},6353:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var a=r(7437),s=r(2265),n=r(6431),i=r(2309),o=r(8214);let d=s.forwardRef((e,t)=>{let{className:r,containerClassName:s,...i}=e;return(0,a.jsx)(n.uZ,{ref:t,containerClassName:(0,o.cn)("flex items-center gap-2 has-[:disabled]:opacity-50",s),className:(0,o.cn)("disabled:cursor-not-allowed",r),...i})});d.displayName="InputOTP";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center",r),...s})});l.displayName="InputOTPGroup";let c=s.forwardRef((e,t)=>{let{index:r,className:i,...d}=e,{char:l,hasFakeCaret:c,isActive:u}=s.useContext(n.VM).slots[r];return(0,a.jsxs)("div",{ref:t,className:(0,o.cn)("relative flex h-10 w-10 items-center justify-center border-y border-r border-gray-200 text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md dark:border-gray-800",u&&"z-10 ring-2 ring-gray-950 ring-offset-white dark:ring-gray-300 dark:ring-offset-gray-950",i),...d,children:[l,c&&(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"h-4 w-px animate-caret-blink bg-gray-950 duration-1000 dark:bg-gray-50"})})]})});c.displayName="InputOTPSlot";let u=s.forwardRef((e,t)=>{let{...r}=e;return(0,a.jsx)("div",{ref:t,role:"separator",...r,children:(0,a.jsx)(i.Z,{})})});u.displayName="InputOTPSeparator";var f=r(349),m=r(1538),p=r(9343),h=r(8364),g=r(2218);let x=(0,g.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(h.f,{ref:t,className:(0,o.cn)(x(),r),...s})});y.displayName=h.f.displayName;let b=p.RV,v=s.createContext({}),w=e=>{let{...t}=e;return(0,a.jsx)(v.Provider,{value:{name:t.name},children:(0,a.jsx)(p.Qr,{...t})})},j=()=>{let e=s.useContext(v),t=s.useContext(k),{getFieldState:r,formState:a}=(0,p.Gc)(),n=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},k=s.createContext({}),N=s.forwardRef((e,t)=>{let{className:r,...n}=e,i=s.useId();return(0,a.jsx)(k.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",r),...n})})});N.displayName="FormItem";let S=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:n,formItemId:i}=j();return(0,a.jsx)(y,{ref:t,className:(0,o.cn)(n&&"text-red-500 dark:text-red-900",r),htmlFor:i,...s})});S.displayName="FormLabel";let T=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:n,formDescriptionId:i,formMessageId:o}=j();return(0,a.jsx)(m.g7,{ref:t,id:n,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...r})});T.displayName="FormControl";let I=s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:n}=j();return(0,a.jsx)("p",{ref:t,id:n,className:(0,o.cn)("text-sm text-gray-500 dark:text-gray-400",r),...s})});I.displayName="FormDescription";let A=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e,{error:i,formMessageId:d}=j(),l=i?String(null==i?void 0:i.message):s;return l?(0,a.jsx)("p",{ref:t,id:d,className:(0,o.cn)("text-sm font-medium text-red-500 dark:text-red-900",r),...n,children:l}):null});A.displayName="FormMessage";var R=r(1014),_=r(9772);let O=(0,g.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300",{variants:{variant:{default:"bg-gray-900 text-gray-50 hover:bg-gray-900/90 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/90",destructive:"bg-red-500 text-gray-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-gray-50 dark:hover:bg-red-900/90",outline:"border border-gray-200 bg-white hover:bg-gray-100 hover:text-gray-900 dark:border-gray-800 dark:bg-gray-950 dark:hover:bg-gray-800 dark:hover:text-gray-50",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-100/80 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-800/80",ghost:"hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-gray-50",link:"text-gray-900 underline-offset-4 hover:underline dark:text-gray-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),E=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:i=!1,...d}=e,l=i?m.g7:"button";return(0,a.jsx)(l,{className:(0,o.cn)(O({variant:s,size:n,className:r})),ref:t,...d})});E.displayName="Button";var Z=r(7228),F=r(6463),C=r(2435);let M=_.z.object({pin:_.z.string().min(6,{message:"Your one-time password must be 6 characters."})});var P=function(){let e=(0,F.useRouter)(),{user:t,logout:r}=(0,f.a)({middleware:"auth"}),n=(0,s.useState)(Math.floor(1e5+9e5*Math.random())),i=(0,p.cI)({resolver:(0,R.F)(M),defaultValues:{pin:""}}),o=async t=>{Z.Z.post("/api/verify-otp",{otp:t.pin,temp_otp:n}).then(()=>{(0,C.Am)({title:"Successfully Verified",description:"You have successfully verified your account. You can now log in."}),e.push("/dashboard")}).catch(e=>{(0,C.Am)({title:"Authentication failed",variant:"destructive",description:e.response.data.status})})};async function m(){await Z.Z.post("/api/authenticating",{temp_otp:n})}return(0,s.useEffect)(()=>{Z.Z.get("/api/checking-status-otp").then(t=>{!0===t.data.status?e.push("/dashboard"):m()})},[]),(0,a.jsx)(a.Fragment,{children:t?(0,a.jsxs)("div",{className:"flex min-h-full flex-1 flex-col justify-center items-center lg:px-8",children:[(0,a.jsx)(b,{...i,children:(0,a.jsxs)("form",{onSubmit:i.handleSubmit(o),className:"space-y-6",children:[(0,a.jsx)(w,{control:i.control,name:"pin",render:e=>{let{field:t}=e;return(0,a.jsxs)(N,{children:[(0,a.jsx)(S,{children:"One-Time Password"}),(0,a.jsx)(T,{className:"flex",children:(0,a.jsxs)(d,{maxLength:6,...t,children:[(0,a.jsxs)(l,{className:"flex mx-auto",children:[(0,a.jsx)(c,{type:"number",index:0}),(0,a.jsx)(c,{type:"number",index:1})]}),(0,a.jsx)(u,{}),(0,a.jsxs)(l,{children:[(0,a.jsx)(c,{type:"number",index:2}),(0,a.jsx)(c,{type:"number",index:3})]}),(0,a.jsx)(u,{}),(0,a.jsxs)(l,{children:[(0,a.jsx)(c,{type:"number",index:4}),(0,a.jsx)(c,{type:"number",index:5})]})]})}),(0,a.jsx)(I,{children:"Please enter the one-time password sent to your phone."}),(0,a.jsx)(A,{})]})}}),(0,a.jsx)(E,{className:"w-full",type:"submit",children:"Submit"})]})}),(0,a.jsxs)("p",{className:"mt-10 text-center text-sm text-gray-500",children:["Logout an Account?"," ",(0,a.jsx)("button",{onClick:r,className:"font-semibold leading-6 text-indigo-600 hover:text-indigo-500",children:"Click here"})]})]}):(0,a.jsx)("div",{className:"flex min-h-full flex-1 flex-col justify-center items-center lg:px-8",children:"Loading..."})})}},2435:function(e,t,r){"use strict";r.d(t,{Am:function(){return u},pm:function(){return f}});var a=r(2265);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=o(l,e),d.forEach(e=>{e(l)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(l);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},349:function(e,t,r){"use strict";r.d(t,{a:function(){return o}});var a=r(1986),s=r(7228),n=r(2265),i=r(6463);let o=function(){let{middleware:e,redirectIfAuthenticated:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,i.useRouter)(),o=(0,i.useParams)(),{data:d,error:l,mutate:c}=(0,a.ZP)("/api/user",()=>s.Z.get("/api/user").then(e=>e.data).catch(e=>{if(409!==e.response.status)throw e;r.push("/verify-email")})),u=()=>s.Z.get("/sanctum/csrf-cookie"),f=async e=>{let{setErrors:t,...r}=e;await u(),t([]),s.Z.post("/register",r).then(()=>c()).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},m=async e=>{let{setErrors:t,setStatus:r,...a}=e;await u(),t([]),r(null),s.Z.post("/login",a).then(()=>c()).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},p=async e=>{let{setErrors:t,setStatus:r,email:a}=e;await u(),t([]),r(null),s.Z.post("/forgot-password",{email:a}).then(e=>r(e.data.status)).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},h=async e=>{let{setErrors:t,setStatus:a,...n}=e;await u(),t([]),a(null),s.Z.post("/reset-password",{token:o.token,...n}).then(e=>r.push("/login?reset="+btoa(e.data.status))).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},g=async()=>{l||await s.Z.post("/logout").then(()=>c()),window.location.pathname="/login"};return(0,n.useEffect)(()=>{"guest"===e&&t&&d&&r.push(t),"/verify-email"===window.location.pathname&&(null==d?void 0:d.email_verified_at)&&r.push(t),"auth"===e&&l&&g()},[d,l]),{user:d,register:f,login:m,forgotPassword:p,resetPassword:h,resendEmailVerification:e=>{let{setStatus:t}=e;s.Z.post("/email/verification-notification").then(e=>t(e.data.status))},logout:g}}},7228:function(e,t,r){"use strict";var a=r(3360);let s=r.n(a)().create({baseURL:"http://localhost:8000",headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0,withXSRFToken:!0});t.Z=s},8214:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(4839),s=r(6164);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[936,986,868,370,971,23,744],function(){return e(e.s=7184)}),_N_E=e.O()}]);